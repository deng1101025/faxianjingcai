<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>书城</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../css/weui.css"/>
    <style>
    	.section {
    		margin-bottom: 30px;
    	}


		.section2 .last-read-list {
			margin: auto;
			background-color: #595a60;
			width: 90%;
			height: 180px;
			border-radius: 1.5em;
		}

		.section2 .last-read-list ul li {
			float: left;
			margin-left: 20px;

		}
		.section2 .read-user-img {
			width: 30px;
		}
		.section2 .read-book-item {
			width: 70px;
			height: 100px;
		}
    </style>
</head>
<body>
    <div id="container" class="container">
        <!-- 搜索dom  start-->
        <!-- <div class="section section1">
        	<div class="weui-search-bar" id="search_bar">
	            <form class="weui-search-bar__form">
	                <div class="weui-search-bar__box">
	                    <i class="weui-icon-search"></i>
	                    <input type="search" class="weui-search-bar__input" id="search_input" onclick="searchCLicked()" placeholder="搜索" />
	                    <a href="javascript:" class="weui-icon-clear" id="search_clear"></a>
	                </div>
	                <label for="search_input" class="weui-search-bar__label" id="search_text">
	                    <i class="weui-icon-search"></i>
	                    <span>搜索</span>
	                </label>
	            </form>
	            <a href="javascript:" class="weui-search-bar__cancel-btn" id="search_cancel">取消</a>
	        </div>
        </div>
        <div class="section section2">
        	<div class="last-read-list">
	            <div class="read-owner-info">
					<ul>
						<li><img id="userimg" class="read-user-img" src="../icon/icon150x150.png"></li>
						<li><span id="username">
							呵呵
						</span></li>
					</ul>
	            </div>
	            <div id="last-read-book-list">
	            	<ul>
	            		<li onclick="gotoBook(0)"><img class="read-book-item" src="https://www.biqukan.com/files/article/image/67/67006/67006s.jpg"></li>
	            		<li onclick="gotoBook(1)"><img class="read-book-item" src="https://www.biqukan.com/files/article/image/67/67006/67006s.jpg"></li>
	            		<li onclick="gotoBook(2)"><img class="read-book-item" src="https://www.biqukan.com/files/article/image/67/67006/67006s.jpg"></li>
	            		<li onclick="gotoShujia()"><span id="btn_shujia" class="">
	            			书架
	            		</span></li>
	            	</ul>
	            </div>
	        </div>
        </div> -->
        <!-- 搜索dom  end-->

    </div>
</body>
</html>
<script type="text/javascript" src="./../script/api.js"></script>
<script type="text/javascript" src="./../script/util.js"></script>
<script type="text/javascript" src="./../script/APICloud-rest.js"></script>
<script type="text/javascript" src="./../script/common.js"></script>
<!-- <script type="text/javascript" src="http://res.wx.qq.com/open/libs/weuijs/1.2.1/weui.min.js"></script> -->
<script type="text/javascript">
// weui.searchBar('#search_bar');
    var browser = null;
    var readHistoryList = null;
    apiready = function() {
      // getNovelHttp({
      //   url: 'https://smartbox.html5.qq.com/novel/detail?q=%E5%89%8D%E4%BB%BB%E6%97%A0%E5%8F%8C&b=1125444718%2C113%2C3&e=sogou%2Dhttps&qbid=1185e839014cc27e'
      // })
//       api.setMenuItems({
//     customItems: ['菜单1', '菜单2'],
//     systemItems: []
// }, function(ret, err){
//     var index = ret.index;
// });
//         api.setPrefs({
//             key: 'readHistoryList',
//             value: [{
//                 name: "前任无双",
//                 img: "https://www.biqukan.com/files/article/image/67/67006/67006s.jpg",
//                 address: "https://wap.biqukan.com/67/67006/"
//             },{
//                 name: "牧神记",
//                 img: "https://www.biqukan.com/files/article/image/17/17225/17225s.jpg",
//                 address: "https://wap.biqukan.com/17/17225/"
//             },{
//                 name: "牧神记",
//                 img: "https://www.biqukan.com/files/article/image/17/17225/17225s.jpg",
//                 address: "https://wap.biqukan.com/17/17225/"
//             }]
//         });
//         //异步返回结果：
//         api.getPrefs({
//             key: 'readHistoryList'
//         }, function(ret, err) {
//             readHistoryList = ret.value;
//             console.log(readHistoryList);
//         });
    }

    function gotoBook(index) {
      console.log($api.strToJson(readHistoryList))
        api.openTabLayout({
            name: 'frame2_book_read',
            url: 'widget://html/frame2_book_read.html',
            title: readHistoryList[index].name,
            hideNavigationBar: false,
            pageParam: ($api.strToJson(readHistoryList))[index],
            navigationBar: {
                background: '#000000',
                shadow: '#000000',
                color: '#ffffff',
                leftButtons: [{
                    iconPath: 'widget://image/back.png',
                    fontSize: '14'
                }],
                rightButtons:[{
                    text: '切换线路',                //（可选项）按钮标题文字，可以和icon同时存在，字符串类型
                    color: '#fff',        //（可选项）按钮标题文字颜色，默认值#000，字符串类型
                    // fontSize:             //（可选项）按钮标题字体大小。默认值17，数字类型
                    iconPath: 'widget://image/refresh.png'   //（可选项）按钮icon图标路径，可以和text同时存在，图片尺寸需要为4倍图，例如设备上面期望显示的图标尺寸为25*25，则图片实际尺寸需要为100*100，字符串类型
                }]
            }
        });
    }

    function searchCLicked() {
        api.openWin({
            name: 'push',
            url: './frame2_novel_search.html',
            animation: {
                type:"movein",                //动画类型（详见动画类型常量）
                subType:"from_top",       //动画子类型（详见动画子类型常量）
                duration:300                //动画过渡时间，默认300毫秒
            }
        });
    }

    function full() {
      api.setFullScreen({
          fullScreen: true,
          optNav: true
      });
      api.setScreenOrientation({
          orientation: 'landscape_left'
      });
    }

    function noFull() {
      api.setFullScreen({
          fullScreen: false,
          optNav: true
      });
      api.setScreenOrientation({
          orientation: 'portrait_down'
      });
    }
</script>
